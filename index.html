<style>
    /* Updated History Card for better summary layout */
    .history-card { background: var(--surface); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--accent); cursor: pointer; }
    .history-card h4 { margin: 0 0 8px 0; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 5px; }
    .history-card .player-summary { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .history-card .p-stat { font-size: 12px; color: var(--text-muted); }
    .history-card .p-name { color: var(--text); font-weight: bold; }
    .history-card .p-score { color: var(--accent); font-weight: 800; }
</style>

<script>
    // ... rest of your code ...

    function render() {
        document.getElementById('cName').value = golfData.course;
        document.getElementById('cDate').value = golfData.date;
        
        // Active Table logic remains same
        let html = "";
        if(golfData.players.length > 0) {
            html = "<table><tr><th>Hole</th><th>Par</th><th>SI</th>";
            golfData.players.forEach(p => html += `<th>${p.name}</th>`);
            html += "</tr>";
            for(let h=0; h<18; h++) {
                if(h === 9) html += genSumRowActive("OUT", 0, 8);
                html += `<tr><td>${h+1}</td>
                    <td><input type='number' value='${golfData.pars[h]}' class='score-in' style='width:30px; font-size:12px; color:#fbbf24;' oninput='updateVal(\"course\",${h},0,this.value)'></td>
                    <td><input type='number' value='${golfData.si[h]}' class='score-in' style='width:30px; font-size:12px; color:#f87171;' oninput='updateVal(\"si\",${h},0,this.value)'></td>`;
                golfData.players.forEach((p, pi) => {
                    html += `<td><input type='number' class='score-in' value='${p.scores[h]||""}' oninput='updateVal(\"score\",${h},${pi},this.value)'><span id='pts-${pi}-${h}' class='pts-label'>${calcPts(p, h, p.scores[h], golfData.pars, golfData.si)}pts</span></td>`;
                });
                html += "</tr>";
            }
            html += genSumRowActive("IN", 9, 17) + genSumRowActive("TOTAL", 0, 17) + "</table>";
        }
        document.getElementById('app').innerHTML = html || "<div style='text-align:center; padding:40px; color:#666;'>No active round.</div>";

        // ENHANCED History Log with Player Totals
        let hLog = "";
        golfData.history.forEach(h => {
            let playerSummaries = h.players.map(p => {
                let g = p.scores.reduce((a,b) => a + (parseInt(b)||0), 0);
                let pts = p.scores.reduce((sum, s, i) => sum + calcPts(p, i, s, h.pars, h.si), 0);
                return `<div class="p-stat"><span class="p-name">${p.name}</span>: <span class="p-score">${g} G | ${pts} Pts</span></div>`;
            }).join("");

            hLog += `<div class="history-card" onclick="openDetail(${h.id})">
                <h4>${h.course} <span style="font-size:11px; color:var(--accent)">${h.date}</span></h4>
                <div class="player-summary">
                    ${playerSummaries}
                </div>
                <span class="del-hist" onclick="event.stopPropagation(); deleteHistory(${h.id})">Delete</span>
            </div>`;
        });
        document.getElementById('history-log').innerHTML = hLog || "<p style='color:#444'>No history available.</p>";
    }
    
    // ... rest of your code ...
</script>
